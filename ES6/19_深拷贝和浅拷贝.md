# ğŸ“Œ 19. æ·±æ‹·è´ä¸æµ…æ‹·è´

---

## ğŸ§  å…ˆç†è§£ï¼šåŸºæœ¬ç±»å‹ vs å¼•ç”¨ç±»å‹

åœ¨è®²æ·±æµ…æ‹·è´ä¹‹å‰ï¼Œå¿…é¡»å…ˆç†è§£ JavaScript ä¸­ä¸¤ç§æ•°æ®ç±»å‹çš„å­˜å‚¨æ–¹å¼ï¼š

### åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå­˜åœ¨æ ˆå†…å­˜ï¼‰

```javascript
let a = 10;
let b = a;  // å¤åˆ¶çš„æ˜¯å€¼æœ¬èº«

a = 20;
console.log(b);  // 10 - ä¸å—å½±å“ï¼
```

**åŸç†**ï¼šåŸºæœ¬ç±»å‹ç›´æ¥å­˜å‚¨åœ¨æ ˆå†…å­˜ä¸­ï¼Œèµ‹å€¼æ—¶**å¤åˆ¶çš„æ˜¯å€¼æœ¬èº«**ã€‚

### å¼•ç”¨æ•°æ®ç±»å‹ï¼ˆå­˜åœ¨å †å†…å­˜ï¼‰

```javascript
let arr = [1, 2, 3];
let arr2 = arr;  // å¤åˆ¶çš„æ˜¯åœ°å€ï¼ˆæŒ‡é’ˆï¼‰

arr[0] = "a";
console.log(arr2);  // ["a", 2, 3] - å—å½±å“äº†ï¼
```

**åŸç†**ï¼šå¼•ç”¨ç±»å‹çš„å€¼å­˜å‚¨åœ¨å †å†…å­˜ä¸­ï¼Œå˜é‡å­˜å‚¨çš„æ˜¯æŒ‡å‘å †å†…å­˜çš„**åœ°å€**ã€‚èµ‹å€¼æ—¶**å¤åˆ¶çš„æ˜¯åœ°å€**ï¼Œä¸¤ä¸ªå˜é‡æŒ‡å‘åŒä¸€å—å†…å­˜ã€‚

```
æ ˆå†…å­˜                    å †å†…å­˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ arr     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ [1, 2, 3] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ arr2    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ï¼ˆåŒä¸€ä¸ªåœ°å€ï¼ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”µ ä»€ä¹ˆæ˜¯æµ…æ‹·è´ï¼Ÿ

**æµ…æ‹·è´**ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡/æ•°ç»„ï¼Œ**åªå¤åˆ¶ç¬¬ä¸€å±‚**çš„å€¼ã€‚å¦‚æœå±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼ˆåµŒå¥—çš„å¯¹è±¡æˆ–æ•°ç»„ï¼‰ï¼Œå¤åˆ¶çš„è¿˜æ˜¯**åœ°å€**ã€‚

### æµ…æ‹·è´æ•°ç»„

```javascript
let arr = [1, 2, ["a", "b"], 3, 4];
let arr2 = [...arr];  // ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦è¿›è¡Œæµ…æ‹·è´

// ä¿®æ”¹ç¬¬ä¸€å±‚ - ä¸å½±å“
arr[0] = "a";
console.log(arr2[0]);  // 1 âœ… ä¸å—å½±å“

// ä¿®æ”¹åµŒå¥—å±‚ - ä¼šå½±å“ï¼
arr[2][0] = "hello";
console.log(arr2[2]);  // ["hello", "b"] âŒ å—å½±å“äº†ï¼
```

**å›¾è§£**ï¼š

```
arr  = [1, 2, â”€â”€â”€â”€â”€â”€â–¶ ["a", "b"], 3, 4]
                          â†‘
arr2 = [1, 2, â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         , 3, 4]  ï¼ˆåµŒå¥—æ•°ç»„å…±ç”¨åŒä¸€ä¸ªåœ°å€ï¼‰
```

### æµ…æ‹·è´å¯¹è±¡

```javascript
let obj = {
    a: 1,
    b: 2,
    c: {
        x: 100,
        y: 200
    }
};

let obj2 = {...obj};  // ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦è¿›è¡Œæµ…æ‹·è´

// ä¿®æ”¹ç¬¬ä¸€å±‚ - ä¸å½±å“
obj.a = 100;
console.log(obj2.a);  // 1 âœ… ä¸å—å½±å“

// ä¿®æ”¹åµŒå¥—å±‚ - ä¼šå½±å“ï¼
obj.c.x = 1000;
console.log(obj2.c.x);  // 1000 âŒ å—å½±å“äº†ï¼
```

**å›¾è§£**ï¼š

```
obj = {                         å †å†…å­˜
    a: 1,                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    b: 2,                      â”‚{ x:100, y:200 }â”‚
    c: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
}                                      â†‘
                                       â”‚
obj2 = {                               â”‚
    a: 1,    ï¼ˆå¤åˆ¶çš„å€¼ï¼‰                â”‚
    b: 2,    ï¼ˆå¤åˆ¶çš„å€¼ï¼‰                â”‚
    c: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ï¼ˆå¤åˆ¶çš„æ˜¯åœ°å€ï¼ŒæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼ï¼‰
}
```

---

## ğŸ”µ æµ…æ‹·è´çš„å¸¸ç”¨æ–¹æ³•

### 1. æ‰©å±•è¿ç®—ç¬¦ `...`ï¼ˆæ¨èï¼‰

```javascript
// æ•°ç»„
let arr = [1, 2, 3];
let arr2 = [...arr];

// å¯¹è±¡
let obj = { a: 1, b: 2 };
let obj2 = { ...obj };
```

### 2. `Object.assign()`

```javascript
let obj = { a: 1, b: 2 };
let obj2 = Object.assign({}, obj);
```

### 3. æ•°ç»„çš„ `slice()` å’Œ `concat()`

```javascript
let arr = [1, 2, 3];

let arr2 = arr.slice();    // æµ…æ‹·è´
let arr3 = arr.concat();   // æµ…æ‹·è´
let arr4 = [].concat(arr); // æµ…æ‹·è´
```

### 4. `Array.from()`

```javascript
let arr = [1, 2, 3];
let arr2 = Array.from(arr);  // æµ…æ‹·è´
```

---

## ğŸŸ¢ ä»€ä¹ˆæ˜¯æ·±æ‹·è´ï¼Ÿ

**æ·±æ‹·è´**ï¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡/æ•°ç»„ï¼Œ**é€’å½’å¤åˆ¶æ‰€æœ‰å±‚çº§**ï¼Œæ–°å¯¹è±¡ä¸åŸå¯¹è±¡**å®Œå…¨ç‹¬ç«‹**ï¼Œä¿®æ”¹ä»»ä½•ä¸€ä¸ªéƒ½ä¸ä¼šå½±å“å¦ä¸€ä¸ªã€‚

### æ·±æ‹·è´æ•°ç»„

```javascript
let arr = [1, 2, ["a", "b"], 3, 4];

// ä½¿ç”¨ JSON æ–¹æ³•è¿›è¡Œæ·±æ‹·è´
let arr2 = JSON.parse(JSON.stringify(arr));

// ä¿®æ”¹åµŒå¥—å±‚ - ä¸å½±å“ï¼
arr[2][0] = "hello";
console.log(arr2[2]);  // ["a", "b"] âœ… ä¸å—å½±å“ï¼
```

### æ·±æ‹·è´å¯¹è±¡

```javascript
let obj = {
    a: 1,
    b: 2,
    c: {
        x: 100,
        y: 200
    }
};

// ä½¿ç”¨ JSON æ–¹æ³•è¿›è¡Œæ·±æ‹·è´
let obj2 = JSON.parse(JSON.stringify(obj));

// ä¿®æ”¹åµŒå¥—å±‚ - ä¸å½±å“ï¼
obj.c.x = 1000;
console.log(obj2.c.x);  // 100 âœ… ä¸å—å½±å“ï¼
```

**å›¾è§£**ï¼š

```
obj = {                         å †å†…å­˜
    a: 1,                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    b: 2,                      â”‚ { x:100, y:200 }â”‚ â† obj.c æŒ‡å‘è¿™é‡Œ
    c: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
}                              

obj2 = {                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    a: 1,                      â”‚ { x:100, y:200 }â”‚ â† obj2.c æŒ‡å‘ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼
    b: 2,                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    c: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ 
}
```

---

## ğŸŸ¢ æ·±æ‹·è´çš„å¸¸ç”¨æ–¹æ³•

### 1. `JSON.parse(JSON.stringify())`ï¼ˆæœ€ç®€å•ï¼‰

```javascript
let obj = { a: 1, b: { c: 2 } };
let obj2 = JSON.parse(JSON.stringify(obj));
```

**âš ï¸ ç¼ºç‚¹**ï¼š

- âŒ ä¸èƒ½æ‹·è´**å‡½æ•°**
- âŒ ä¸èƒ½æ‹·è´ **undefined**ï¼ˆä¼šä¸¢å¤±ï¼‰
- âŒ ä¸èƒ½æ‹·è´ **Symbol**
- âŒ ä¸èƒ½å¤„ç†**å¾ªç¯å¼•ç”¨**
- âŒ ä¼šä¸¢å¤± **Date** å¯¹è±¡ï¼ˆå˜æˆå­—ç¬¦ä¸²ï¼‰
- âŒ ä¼šä¸¢å¤± **RegExp** å¯¹è±¡

```javascript
let obj = {
    fn: function() {},
    undef: undefined,
    date: new Date(),
    sym: Symbol('test')
};

let obj2 = JSON.parse(JSON.stringify(obj));
console.log(obj2);  
// { date: "2024-01-28T..." }  
// fnã€undefã€sym éƒ½ä¸¢å¤±äº†ï¼date å˜æˆäº†å­—ç¬¦ä¸²ï¼
```

### 2. `structuredClone()`ï¼ˆç°ä»£æµè§ˆå™¨æ¨è âœ…ï¼‰

```javascript
let obj = { a: 1, b: { c: 2 }, date: new Date() };
let obj2 = structuredClone(obj);

obj.b.c = 100;
console.log(obj2.b.c);  // 2 âœ… ä¸å—å½±å“
console.log(obj2.date instanceof Date);  // true âœ… Date å¯¹è±¡ä¿ç•™äº†
```

**ä¼˜ç‚¹**ï¼š

- âœ… æ”¯æŒ Dateã€RegExpã€Mapã€Set ç­‰
- âœ… æ”¯æŒå¾ªç¯å¼•ç”¨
- âœ… åŸç”Ÿæ”¯æŒï¼Œæ— éœ€å¼•å…¥åº“

**ç¼ºç‚¹**ï¼š

- âŒ ä¸æ”¯æŒå‡½æ•°
- âŒ æ—§æµè§ˆå™¨ä¸æ”¯æŒï¼ˆIEã€æ—§ç‰ˆ Chrome/Firefoxï¼‰

### 3. æ‰‹å†™é€’å½’æ·±æ‹·è´

```javascript
function deepClone(source) {
    // åŸºæœ¬ç±»å‹ç›´æ¥è¿”å›
    if (source === null || typeof source !== 'object') {
        return source;
    }
    
    // å¤„ç†æ•°ç»„
    if (Array.isArray(source)) {
        let result = [];
        for (let i = 0; i < source.length; i++) {
            result[i] = deepClone(source[i]);  // é€’å½’
        }
        return result;
    }
    
    // å¤„ç†å¯¹è±¡
    let result = {};
    for (let key in source) {
        if (source.hasOwnProperty(key)) {
            result[key] = deepClone(source[key]);  // é€’å½’
        }
    }
    return result;
}

// ä½¿ç”¨
let obj = { a: 1, b: { c: 2 } };
let obj2 = deepClone(obj);

obj.b.c = 100;
console.log(obj2.b.c);  // 2 âœ… ä¸å—å½±å“
```

---

#### ğŸ” æ‰‹å†™æ·±æ‹·è´åŸç†è¯¦è§£

è®©æˆ‘ä»¬é€è¡Œæ‹†è§£è¿™ä¸ªå‡½æ•°ï¼Œç†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š

##### ğŸ“ ä»£ç é€è¡Œè§£é‡Š

```javascript
function deepClone(source) {
```
**ç¬¬1è¡Œ**ï¼šå®šä¹‰ä¸€ä¸ªå‡½æ•° `deepClone`ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•° `source`ï¼ˆè¦æ‹·è´çš„æºæ•°æ®ï¼‰ã€‚

---

```javascript
    if (source === null || typeof source !== 'object') {
        return source;
    }
```
**ç¬¬2-4è¡Œï¼ˆé€’å½’å‡ºå£ / è¾¹ç•Œæ¡ä»¶ï¼‰**ï¼š

è¿™æ˜¯**é€’å½’çš„ç»ˆæ­¢æ¡ä»¶**ï¼Œéå¸¸é‡è¦ï¼

- `source === null`ï¼šå¦‚æœæ˜¯ `null`ï¼Œç›´æ¥è¿”å›ï¼ˆå› ä¸º `typeof null` æ˜¯ `'object'`ï¼Œéœ€è¦å•ç‹¬åˆ¤æ–­ï¼‰
- `typeof source !== 'object'`ï¼šå¦‚æœä¸æ˜¯å¯¹è±¡ç±»å‹ï¼ˆå³åŸºæœ¬ç±»å‹ï¼š`number`ã€`string`ã€`boolean`ã€`undefined`ã€`symbol`ï¼‰ï¼Œç›´æ¥è¿”å›å€¼æœ¬èº«

**ä¸ºä»€ä¹ˆåŸºæœ¬ç±»å‹ç›´æ¥è¿”å›ï¼Ÿ**
å› ä¸ºåŸºæœ¬ç±»å‹èµ‹å€¼æ—¶æœ¬èº«å°±æ˜¯**å¤åˆ¶å€¼**ï¼Œä¸å­˜åœ¨å¼•ç”¨é—®é¢˜ï¼š

```javascript
let a = 10;
let b = a;  // b å¾—åˆ°çš„æ˜¯ 10 è¿™ä¸ªå€¼æœ¬èº«ï¼Œä¸æ˜¯åœ°å€
a = 20;
console.log(b);  // 10ï¼Œä¸å—å½±å“
```

---

```javascript
    if (Array.isArray(source)) {
        let result = [];
        for (let i = 0; i < source.length; i++) {
            result[i] = deepClone(source[i]);  // é€’å½’
        }
        return result;
    }
```
**ç¬¬5-11è¡Œï¼ˆå¤„ç†æ•°ç»„ï¼‰**ï¼š

1. `Array.isArray(source)`ï¼šåˆ¤æ–­æ˜¯ä¸æ˜¯æ•°ç»„
2. `let result = []`ï¼šåˆ›å»ºä¸€ä¸ª**å…¨æ–°çš„ç©ºæ•°ç»„**ï¼ˆè¿™å°±æ˜¯"æ·±"çš„ä½“ç°ï¼ï¼‰
3. `for` å¾ªç¯éå†åŸæ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ 
4. `result[i] = deepClone(source[i])`ï¼š**é€’å½’è°ƒç”¨è‡ªå·±**ï¼
   - å¦‚æœ `source[i]` æ˜¯åŸºæœ¬ç±»å‹ â†’ ç›´æ¥è¿”å›å€¼
   - å¦‚æœ `source[i]` æ˜¯æ•°ç»„ â†’ å†åˆ›å»ºæ–°æ•°ç»„ï¼Œç»§ç»­é€’å½’
   - å¦‚æœ `source[i]` æ˜¯å¯¹è±¡ â†’ å†åˆ›å»ºæ–°å¯¹è±¡ï¼Œç»§ç»­é€’å½’
5. `return result`ï¼šè¿”å›è¿™ä¸ªå…¨æ–°çš„æ•°ç»„

---

```javascript
    let result = {};
    for (let key in source) {
        if (source.hasOwnProperty(key)) {
            result[key] = deepClone(source[key]);  // é€’å½’
        }
    }
    return result;
```
**ç¬¬12-18è¡Œï¼ˆå¤„ç†å¯¹è±¡ï¼‰**ï¼š

1. `let result = {}`ï¼šåˆ›å»ºä¸€ä¸ª**å…¨æ–°çš„ç©ºå¯¹è±¡**
2. `for (let key in source)`ï¼šéå†å¯¹è±¡çš„æ‰€æœ‰å±æ€§å
3. `source.hasOwnProperty(key)`ï¼šåªæ‹·è´å¯¹è±¡**è‡ªèº«çš„å±æ€§**ï¼Œä¸æ‹·è´åŸå‹é“¾ä¸Šçš„å±æ€§
4. `result[key] = deepClone(source[key])`ï¼š**é€’å½’è°ƒç”¨è‡ªå·±**ï¼
5. `return result`ï¼šè¿”å›è¿™ä¸ªå…¨æ–°çš„å¯¹è±¡

---

##### ğŸ¬ æ‰§è¡Œæµç¨‹æ¼”ç¤º

å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªåµŒå¥—å¯¹è±¡ï¼š

```javascript
let obj = { 
    a: 1, 
    b: { 
        c: 2 
    } 
};

let obj2 = deepClone(obj);
```

**æ‰§è¡Œè¿‡ç¨‹**ï¼š

```
ç¬¬1æ¬¡è°ƒç”¨ï¼šdeepClone({ a: 1, b: { c: 2 } })
â”‚
â”œâ”€ source æ˜¯å¯¹è±¡ï¼Œä¸æ˜¯ nullï¼Œä¸æ˜¯åŸºæœ¬ç±»å‹ â†’ ç»§ç»­
â”œâ”€ source ä¸æ˜¯æ•°ç»„ â†’ è·³è¿‡æ•°ç»„å¤„ç†
â”œâ”€ åˆ›å»º result = {}
â”‚
â”œâ”€ éå† key = "a"
â”‚   â””â”€ result["a"] = deepClone(1)
â”‚       â”‚
â”‚       â””â”€ ç¬¬2æ¬¡è°ƒç”¨ï¼šdeepClone(1)
â”‚           â”œâ”€ typeof 1 !== 'object' â†’ æ˜¯åŸºæœ¬ç±»å‹
â”‚           â””â”€ ç›´æ¥è¿”å› 1 âœ…
â”‚
â”œâ”€ éå† key = "b"
â”‚   â””â”€ result["b"] = deepClone({ c: 2 })
â”‚       â”‚
â”‚       â””â”€ ç¬¬3æ¬¡è°ƒç”¨ï¼šdeepClone({ c: 2 })
â”‚           â”œâ”€ source æ˜¯å¯¹è±¡ â†’ ç»§ç»­
â”‚           â”œâ”€ åˆ›å»º result = {}
â”‚           â”œâ”€ éå† key = "c"
â”‚           â”‚   â””â”€ result["c"] = deepClone(2)
â”‚           â”‚       â”‚
â”‚           â”‚       â””â”€ ç¬¬4æ¬¡è°ƒç”¨ï¼šdeepClone(2)
â”‚           â”‚           â”œâ”€ typeof 2 !== 'object' â†’ æ˜¯åŸºæœ¬ç±»å‹
â”‚           â”‚           â””â”€ ç›´æ¥è¿”å› 2 âœ…
â”‚           â”‚
â”‚           â””â”€ è¿”å› { c: 2 }ï¼ˆè¿™æ˜¯ä¸€ä¸ªæ–°å¯¹è±¡ï¼ï¼‰âœ…
â”‚
â””â”€ è¿”å› { a: 1, b: { c: 2 } }ï¼ˆè¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼ï¼‰âœ…
```

---

##### ğŸ”‘ æ ¸å¿ƒåŸç†æ€»ç»“

| æ­¥éª¤ | åšäº†ä»€ä¹ˆ | ä¸ºä»€ä¹ˆè¿™ä¹ˆåš |
|:-----|:---------|:-------------|
| **1. åˆ¤æ–­åŸºæœ¬ç±»å‹** | ç›´æ¥è¿”å›å€¼ | åŸºæœ¬ç±»å‹æœ¬èº«å°±æ˜¯å€¼æ‹·è´ï¼Œæ— éœ€å¤„ç† |
| **2. åˆ›å»ºæ–°å®¹å™¨** | `[]` æˆ– `{}` | è¿™æ˜¯"æ·±"çš„å…³é”®ï¼æ–°å®¹å™¨ â‰  åŸå®¹å™¨ |
| **3. éå†å±æ€§** | for å¾ªç¯ / for...in | æŠŠæ¯ä¸ªå±æ€§éƒ½å¤„ç†ä¸€é |
| **4. é€’å½’è°ƒç”¨** | deepClone(å­å…ƒç´ ) | å¦‚æœå­å…ƒç´ ä¹Ÿæ˜¯å¯¹è±¡ï¼Œç»§ç»­å¾€ä¸‹æ‹·è´ |
| **5. è¿”å›æ–°å®¹å™¨** | return result | å±‚å±‚è¿”å›ï¼Œç»„è£…æˆå®Œæ•´çš„æ–°å¯¹è±¡ |

---

##### ğŸ¯ ä¸ºä»€ä¹ˆå«"é€’å½’"ï¼Ÿ

**é€’å½’** = å‡½æ•°**è°ƒç”¨è‡ªå·±**

```
deepClone(å¤–å±‚å¯¹è±¡)
    â””â”€ deepClone(åµŒå¥—å¯¹è±¡)
            â””â”€ deepClone(æ›´æ·±çš„åµŒå¥—)
                    â””â”€ deepClone(åŸºæœ¬ç±»å‹) â†’ è¿”å›ï¼
                            â†‘
                            é€’å½’å‡ºå£ï¼ˆç»ˆæ­¢æ¡ä»¶ï¼‰
```

å°±åƒ**ä¿„ç½—æ–¯å¥—å¨ƒ**ğŸª†ï¼š
- æ‰“å¼€ç¬¬ä¸€ä¸ªå¨ƒå¨ƒ â†’ é‡Œé¢è¿˜æœ‰ä¸€ä¸ª â†’ ç»§ç»­æ‰“å¼€
- æ‰“å¼€åˆ°æœ€åä¸€ä¸ªï¼ˆæœ€å°çš„ï¼‰â†’ æ²¡æœ‰äº† â†’ å¼€å§‹å¾€å›è¿”
- æ¯ä¸€å±‚éƒ½åˆ›å»ºäº†ä¸€ä¸ª"æ–°å¨ƒå¨ƒ"ï¼Œæœ€åç»„è£…æˆä¸€å¥—å…¨æ–°çš„å¥—å¨ƒ

---

##### âš ï¸ è¿™ä¸ªç®€å•ç‰ˆæœ¬çš„å±€é™æ€§

```javascript
// âŒ ä¸èƒ½å¤„ç†ä»¥ä¸‹æƒ…å†µï¼š

// 1. å¾ªç¯å¼•ç”¨
let obj = { a: 1 };
obj.self = obj;  // obj å¼•ç”¨äº†è‡ªå·±
// deepClone(obj) â†’ ä¼šæ— é™é€’å½’ï¼Œæ ˆæº¢å‡ºï¼

// 2. ç‰¹æ®Šå¯¹è±¡ç±»å‹
let obj = {
    date: new Date(),      // ä¼šå˜æˆæ™®é€šå¯¹è±¡
    regex: /hello/g,       // ä¼šå˜æˆç©ºå¯¹è±¡ {}
    map: new Map(),        // ä¼šå˜æˆç©ºå¯¹è±¡ {}
    set: new Set()         // ä¼šå˜æˆç©ºå¯¹è±¡ {}
};

// 3. å‡½æ•°
let obj = { fn: function() {} };  // å‡½æ•°ä¸ä¼šè¢«æ‹·è´
```

**å®Œå–„ç‰ˆæœ¬**éœ€è¦å¤„ç†è¿™äº›ç‰¹æ®Šæƒ…å†µï¼Œä½†å¯¹äºæ—¥å¸¸ä½¿ç”¨ï¼Œè¿™ä¸ªç®€å•ç‰ˆæœ¬å·²ç»å¤Ÿç”¨äº†ï¼

---

### 4. ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ Lodashï¼‰

```javascript
// éœ€è¦å…ˆå¼•å…¥ lodash
let obj2 = _.cloneDeep(obj);
```

---

## ğŸ“Š æµ…æ‹·è´ vs æ·±æ‹·è´ å¯¹æ¯”è¡¨

| å¯¹æ¯”é¡¹ | æµ…æ‹·è´ | æ·±æ‹·è´ |
|:------|:------|:------|
| **å¤åˆ¶å±‚çº§** | åªå¤åˆ¶ç¬¬ä¸€å±‚ | é€’å½’å¤åˆ¶æ‰€æœ‰å±‚çº§ |
| **åµŒå¥—å¯¹è±¡** | å…±äº«å¼•ç”¨ï¼ˆä¼šäº’ç›¸å½±å“ï¼‰ | å®Œå…¨ç‹¬ç«‹ï¼ˆä¸å½±å“ï¼‰ |
| **æ€§èƒ½** | å¿« âš¡ | è¾ƒæ…¢ ğŸ¢ |
| **å¸¸ç”¨æ–¹æ³•** | `...`ã€`Object.assign()` | `JSON.parse(JSON.stringify())`ã€`structuredClone()` |
| **é€‚ç”¨åœºæ™¯** | ç®€å•å¯¹è±¡ã€æ— åµŒå¥— | å¤æ‚åµŒå¥—å¯¹è±¡ |

---

## ğŸ¯ é€šä¿—ç†è§£

### æµ…æ‹·è´ = å¤å°ç¬¬ä¸€é¡µ

æƒ³è±¡ä½ æœ‰ä¸€æœ¬ç›¸å†Œï¼Œæµ…æ‹·è´å°±åƒ**åªå¤å°äº†ç›®å½•é¡µ**ã€‚ç›®å½•ä¸Šå†™ç€"ç¬¬ä¸€å¼ ç…§ç‰‡åœ¨å“ª"ï¼Œå¤å°åä½ å’ŒåŸä»¶æŒ‡å‘çš„æ˜¯**åŒä¸€å¼ ç…§ç‰‡**ã€‚ä½ æŠŠç…§ç‰‡æ’•äº†ï¼Œä¸¤æœ¬ç›¸å†Œéƒ½æ²¡è¿™å¼ ç…§ç‰‡äº†ã€‚

### æ·±æ‹·è´ = æ•´æœ¬å¤å°

æ·±æ‹·è´å°±åƒ**æŠŠæ•´æœ¬ç›¸å†Œè¿åŒæ‰€æœ‰ç…§ç‰‡éƒ½å¤å°ä¸€é**ï¼Œä½ å¾—åˆ°äº†ä¸€æœ¬å…¨æ–°çš„ç›¸å†Œã€‚ä½ åœ¨æ–°ç›¸å†Œä¸Šæ¶‚é¸¦ï¼ŒåŸç›¸å†Œå®Œå…¨ä¸å—å½±å“ã€‚

---

## ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯

### ä»€ä¹ˆæ—¶å€™ç”¨æµ…æ‹·è´ï¼Ÿ

```javascript
// 1. åªéœ€è¦ä¿®æ”¹ç¬¬ä¸€å±‚å±æ€§
let user = { name: "å¼ ä¸‰", age: 18 };
let newUser = { ...user, age: 20 };  // åªä¿®æ”¹ age

// 2. åˆå¹¶é…ç½®å¯¹è±¡
let defaultConfig = { theme: "light", lang: "zh" };
let userConfig = { theme: "dark" };
let config = { ...defaultConfig, ...userConfig };
```

### ä»€ä¹ˆæ—¶å€™ç”¨æ·±æ‹·è´ï¼Ÿ

```javascript
// 1. ç¼–è¾‘è¡¨å•æ•°æ®æ—¶ï¼Œä¸æƒ³å½±å“åŸæ•°æ®
let originalData = { user: { name: "å¼ ä¸‰", address: { city: "åŒ—äº¬" } } };
let formData = JSON.parse(JSON.stringify(originalData));
// ç”¨æˆ·ç¼–è¾‘ formDataï¼Œç‚¹å‡»å–æ¶ˆè¿˜èƒ½æ¢å¤ originalData

// 2. Redux/Vuex ç­‰çŠ¶æ€ç®¡ç†éœ€è¦ä¿æŒæ•°æ®ä¸å¯å˜
let state = { users: [{ id: 1, name: "å¼ ä¸‰" }] };
let newState = JSON.parse(JSON.stringify(state));
newState.users.push({ id: 2, name: "æå››" });
// state ä¿æŒä¸å˜
```

---

## âš ï¸ å¸¸è§è¯¯åŒº

### è¯¯åŒº1ï¼šä»¥ä¸º `=` èµ‹å€¼æ˜¯æ‹·è´

```javascript
let arr = [1, 2, 3];
let arr2 = arr;  // âŒ è¿™ä¸æ˜¯æ‹·è´ï¼Œåªæ˜¯è®©ä¸¤ä¸ªå˜é‡æŒ‡å‘åŒä¸€ä¸ªæ•°ç»„ï¼
```

### è¯¯åŒº2ï¼šä»¥ä¸ºæ‰©å±•è¿ç®—ç¬¦æ˜¯æ·±æ‹·è´

```javascript
let obj = { a: { b: 1 } };
let obj2 = { ...obj };  // æµ…æ‹·è´ï¼Œä¸æ˜¯æ·±æ‹·è´ï¼

obj.a.b = 100;
console.log(obj2.a.b);  // 100 - å—å½±å“äº†ï¼
```

---

## ğŸ“ æ€»ç»“

| æ¦‚å¿µ | æ ¸å¿ƒè¦ç‚¹ |
|:-----|:---------|
| **èµ‹å€¼** | åªå¤åˆ¶åœ°å€ï¼Œä¸¤ä¸ªå˜é‡æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ |
| **æµ…æ‹·è´** | åˆ›å»ºæ–°å¯¹è±¡ï¼Œåªå¤åˆ¶ç¬¬ä¸€å±‚ï¼ŒåµŒå¥—å¯¹è±¡å…±äº«å¼•ç”¨ |
| **æ·±æ‹·è´** | åˆ›å»ºæ–°å¯¹è±¡ï¼Œé€’å½’å¤åˆ¶æ‰€æœ‰å±‚çº§ï¼Œå®Œå…¨ç‹¬ç«‹ |

**è®°å¿†å£è¯€**ï¼š

- **æµ…æ‹·è´**ï¼šè¡¨é¢ç‹¬ç«‹ï¼Œå†…å¿ƒè¿˜æ˜¯è¿ç€çš„ ğŸ’”
- **æ·±æ‹·è´**ï¼šå½»å½»åº•åº•åˆ†å¼€ï¼Œè€æ­»ä¸ç›¸å¾€æ¥ ğŸ’¯

---

*å¸Œæœ›è¿™ä»½è®²è§£èƒ½å¸®ä½ ç†è§£æ·±æ‹·è´å’Œæµ…æ‹·è´ï¼æœ‰é—®é¢˜éšæ—¶é—®ï½* ğŸ˜Š
